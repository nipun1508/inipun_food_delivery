<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inipun - Food Delivery</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        :root {
            --inipun-primary: #e11d48;
            --inipun-secondary: #f59e0b;
            --inipun-dark: #1e293b;
            --inipun-light: #f8fafc;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--inipun-light);
            line-height: 1.6;
        }

        .navbar-brand {
            font-size: 1.8rem;
            letter-spacing: -0.5px;
        }

        .logo-icon {
            font-size: 2rem;
            margin-right: 0.5rem;
        }

        .navbar-dark.bg-primary {
            background-color: var(--inipun-primary) !important;
        }

        .hero-section {
            background: linear-gradient(135deg, var(--inipun-primary), var(--inipun-dark));
            background-size: cover;
            background-position: center;
            position: relative;
        }

        .hero-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.3);
        }

        .hero-section .container {
            position: relative;
            z-index: 2;
        }

        .feature-item {
            transition: transform 0.3s ease;
            border-radius: 15px;
            background: white;
            margin: 10px;
            padding: 2rem 1rem;
        }

        .feature-item:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .feature-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .restaurant-card {
            border: none;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            overflow: hidden;
            background: white;
            height: 100%;
        }

        .restaurant-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .restaurant-image {
            height: 200px;
            background-size: cover;
            background-position: center;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.7);
            position: relative;
        }

        .restaurant-image::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.2);
        }

        .restaurant-image span {
            position: relative;
            z-index: 1;
            font-size: 1.5rem;
            text-align: center;
            padding: 0 1rem;
        }

        .btn-primary {
            background-color: var(--inipun-primary);
            border-color: var(--inipun-primary);
            font-weight: 600;
        }

        .btn-primary:hover {
            background-color: #be123c;
            border-color: #be123c;
        }

        .btn-warning {
            background-color: var(--inipun-secondary);
            border-color: var(--inipun-secondary);
            font-weight: 600;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            background: #10b981;
            color: white;
            border-radius: 5px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 1050;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from { transform: translateX(100%); }
            to { transform: translateX(0); }
        }

        .cart-icon {
            font-size: 1.2rem;
        }

        .veg-indicator {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 8px;
        }

        .veg {
            background-color: green;
            border: 1px solid green;
        }

        .non-veg {
            background-color: red;
            border: 1px solid red;
        }

        .spicy-level {
            font-size: 0.8rem;
            color: #e11d48;
        }

        .menu-item-card {
            border: none;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 1rem;
            transition: all 0.3s ease;
        }

        .menu-item-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.15);
        }

        .food-emoji {
            font-size: 2rem;
            margin-right: 1rem;
        }
        
        .indian-special {
            border-left: 4px solid #f59e0b;
        }

        .fallback-image {
            background: linear-gradient(45deg, #FF6B6B, #FFE66D);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 4rem;
        }

        .meal-category {
            cursor: pointer;
            padding: 10px 20px;
            border-radius: 25px;
            margin: 5px;
            transition: all 0.3s ease;
        }

        .meal-category.active {
            background-color: var(--inipun-primary);
            color: white;
        }

        .payment-method {
            border: 2px solid #e5e7eb;
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .payment-method:hover {
            border-color: var(--inipun-primary);
        }

        .payment-method.selected {
            border-color: var(--inipun-primary);
            background-color: #fef2f2;
        }

        .user-avatar {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            background: var(--inipun-secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary sticky-top">
        <div class="container">
            <a class="navbar-brand fw-bold" href="#">
                <span class="logo-icon">üçΩÔ∏è</span> INIPUN
            </a>
            <div class="navbar-nav ms-auto">
                <a class="nav-link" href="#restaurants">Restaurants</a>
                <a class="nav-link" href="#deals">Deals</a>
                <a class="nav-link" href="#" onclick="showCart()">
                    <span class="cart-icon">üõí</span> 
                    Cart (<span id="cartCount">0</span>)
                </a>
                <a class="nav-link" href="#" onclick="showLogin()" id="loginLink">Login</a>
                <div class="nav-link d-none" id="userProfile">
                    <div class="user-avatar" id="userInitial">U</div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero-section text-white py-5">
        <div class="container text-center">
            <h1 class="display-4 mb-4 fw-bold">Welcome to INIPUN</h1>
            <p class="lead mb-4">Delicious food delivered fast to your doorstep</p>
            
            <!-- Search Bar -->
            <div class="row justify-content-center">
                <div class="col-md-8">
                    <div class="input-group input-group-lg">
                        <input type="text" class="form-control" id="searchInput" 
                               placeholder="What are you craving for? Search restaurants or cuisine...">
                        <button class="btn btn-warning text-white fw-bold" onclick="searchRestaurants()">
                            FIND FOOD
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Meal Categories -->
    <section class="meal-categories py-3 bg-white">
        <div class="container">
            <div class="d-flex justify-content-center flex-wrap">
                <div class="meal-category active" data-category="all" onclick="filterByCategory('all')">
                    üçΩÔ∏è All Items
                </div>
                <div class="meal-category" data-category="tiffen" onclick="filterByCategory('tiffen')">
                    ü•™ Tiffen
                </div>
                <div class="meal-category" data-category="lunch" onclick="filterByCategory('lunch')">
                    üçõ Lunch
                </div>
                <div class="meal-category" data-category="dinner" onclick="filterByCategory('dinner')">
                    üç≤ Dinner
                </div>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section class="features py-5 bg-light">
        <div class="container">
            <h2 class="text-center mb-5">Why Choose INIPUN?</h2>
            <div class="row text-center">
                <div class="col-md-3">
                    <div class="feature-item p-4">
                        <div class="feature-icon">üöö</div>
                        <h4>Fast Delivery</h4>
                        <p class="mb-0">Get your food delivered in 30 minutes or less</p>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="feature-item p-4">
                        <div class="feature-icon">üå∂Ô∏è</div>
                        <h4>Indian Specialties</h4>
                        <p class="mb-0">Authentic Indian cuisine from all regions</p>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="feature-item p-4">
                        <div class="feature-icon">üí≥</div>
                        <h4>Easy Payment</h4>
                        <p class="mb-0">UPI, Cards, Cash & Digital Wallets accepted</p>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="feature-item p-4">
                        <div class="feature-icon">ü•°</div>
                        <h4>Hygienic Packaging</h4>
                        <p class="mb-0">Food sealed for safety and freshness</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Restaurant Grid -->
    <section class="restaurants py-5" id="restaurants">
        <div class="container">
            <h2 class="text-center mb-5">Featured Restaurants</h2>
            <div class="row" id="restaurantGrid">
                <!-- Restaurants will be loaded here by JavaScript -->
            </div>
        </div>
    </section>

    <!-- Login Modal -->
    <div class="modal fade" id="loginModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Login to INIPUN</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="loginForm">
                        <div class="mb-3">
                            <label for="loginEmail" class="form-label">Email or Phone</label>
                            <input type="text" class="form-control" id="loginEmail" required>
                        </div>
                        <div class="mb-3">
                            <label for="loginPassword" class="form-label">Password</label>
                            <input type="password" class="form-control" id="loginPassword" required>
                        </div>
                        <button type="submit" class="btn btn-primary w-100">Login</button>
                    </form>
                    <div class="text-center mt-3">
                        <small>Don't have an account? <a href="#" onclick="showSignup()">Sign up</a></small>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Signup Modal -->
    <div class="modal fade" id="signupModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Create Account</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="signupForm">
                        <div class="mb-3">
                            <label for="signupName" class="form-label">Full Name</label>
                            <input type="text" class="form-control" id="signupName" required>
                        </div>
                        <div class="mb-3">
                            <label for="signupEmail" class="form-label">Email</label>
                            <input type="email" class="form-control" id="signupEmail" required>
                        </div>
                        <div class="mb-3">
                            <label for="signupPhone" class="form-label">Phone Number</label>
                            <input type="tel" class="form-control" id="signupPhone" required>
                        </div>
                        <div class="mb-3">
                            <label for="signupPassword" class="form-label">Password</label>
                            <input type="password" class="form-control" id="signupPassword" required>
                        </div>
                        <button type="submit" class="btn btn-primary w-100">Create Account</button>
                    </form>
                    <div class="text-center mt-3">
                        <small>Already have an account? <a href="#" onclick="showLogin()">Login</a></small>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Shopping Cart Modal -->
    <div class="modal fade" id="cartModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">üõí Your Inipun Cart</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div id="cartItems">
                        <!-- Cart items will appear here -->
                    </div>
                    <div class="text-center mt-4" id="emptyCartMessage">
                        <h5>Your cart is empty</h5>
                        <p>Add some delicious food from our restaurants!</p>
                    </div>
                </div>
                <div class="modal-footer">
                    <div class="w-100">
                        <div class="d-flex justify-content-between mb-3">
                            <strong>Total: ‚Çπ<span id="cartTotal">0.00</span></strong>
                        </div>
                        <button class="btn btn-primary w-100" onclick="showPaymentOptions()">Proceed to Checkout</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Payment Modal -->
    <div class="modal fade" id="paymentModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Payment Methods</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="payment-method" onclick="selectPayment('upi')">
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="paymentMethod" id="upiPayment">
                            <label class="form-check-label fw-bold" for="upiPayment">
                                UPI Payment
                            </label>
                        </div>
                        <small class="text-muted">Pay using Google Pay, PhonePe, Paytm</small>
                    </div>
                    <div class="payment-method" onclick="selectPayment('card')">
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="paymentMethod" id="cardPayment">
                            <label class="form-check-label fw-bold" for="cardPayment">
                                Credit/Debit Card
                            </label>
                        </div>
                        <small class="text-muted">Visa, MasterCard, RuPay</small>
                    </div>
                    <div class="payment-method" onclick="selectPayment('netbanking')">
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="paymentMethod" id="netbankingPayment">
                            <label class="form-check-label fw-bold" for="netbankingPayment">
                                Net Banking
                            </label>
                        </div>
                        <small class="text-muted">All major Indian banks</small>
                    </div>
                    <div class="payment-method" onclick="selectPayment('cod')">
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="paymentMethod" id="codPayment">
                            <label class="form-check-label fw-bold" for="codPayment">
                                Cash on Delivery
                            </label>
                        </div>
                        <small class="text-muted">Pay when you receive your order</small>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" onclick="processPayment()">Pay Now</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-dark text-white py-4">
        <div class="container text-center">
            <p>&copy; 2024 <strong>INIPUN</strong> Food Delivery. All rights reserved.</p>
            <p class="small">Delivering happiness, one meal at a time üçΩÔ∏è</p>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // INIPUN Food Delivery - Complete JavaScript
        console.log('üçΩÔ∏è INIPUN Food Delivery Platform Initialized');

        let inipunCart = [];
        let restaurants = [];
        let currentUser = null;
        let selectedPaymentMethod = null;
        let currentCategory = 'all';

        // Sample restaurant data with meal categories
        const sampleRestaurants = [
            {
                id: 1,
                name: "Pizza Italiana",
                cuisine: "Italian",
                description: "Authentic Italian pizzas with Indian fusion options",
                deliveryTime: "25-35 min",
                rating: 4.5,
                reviewCount: 128,
                minOrder: 299,
                image: "https://images.unsplash.com/photo-1513104890138-7c749659a591?w=400&h=250&fit=crop&auto=format",
                category: ["lunch", "dinner"],
                menu: [
                    { id: 1, name: "Margherita Pizza", price: 299, description: "Classic tomato and mozzarella", veg: true, spicy: 0, category: ["lunch", "dinner"] },
                    { id: 2, name: "Tandoori Paneer Pizza", price: 399, description: "Indian twist with spicy paneer", veg: true, spicy: 2, category: ["lunch", "dinner"] },
                    { id: 3, name: "Pepperoni Pizza", price: 349, description: "Spicy pepperoni and cheese", veg: false, spicy: 1, category: ["lunch", "dinner"] },
                    { id: 4, name: "Chicken Tikka Pizza", price: 449, description: "Indian favorite on pizza base", veg: false, spicy: 2, category: ["lunch", "dinner"] },
                    { id: 5, name: "Garlic Bread", price: 149, description: "Freshly baked with garlic butter", veg: true, spicy: 0, category: ["lunch", "dinner"] }
                ]
            },
            {
                id: 2,
                name: "South Indian Delights",
                cuisine: "South Indian",
                description: "Authentic dosas, idlis and more",
                deliveryTime: "20-30 min",
                rating: 4.6,
                reviewCount: 192,
                minOrder: 199,
                image: "https://images.unsplash.com/photo-1631452180519-c014fe946bc7?w=400&h=250&fit=crop",
                category: ["tiffen", "lunch", "dinner"],
                menu: [
                    { id: 6, name: "Masala Dosa", price: 129, description: "Crispy rice crepe with potato", veg: true, spicy: 1, category: ["tiffen", "lunch", "dinner"] },
                    { id: 7, name: "Idli Sambar", price: 99, description: "Steamed rice cakes with lentil soup", veg: true, spicy: 1, category: ["tiffen"] },
                    { id: 8, name: "Pongal", price: 89, description: "Savory rice and lentil dish", veg: true, spicy: 1, category: ["tiffen"] },
                    { id: 9, name: "Medu Vada", price: 89, description: "Savory lentil donuts", veg: true, spicy: 1, category: ["tiffen"] },
                    { id: 10, name: "Uttapam", price: 149, description: "Thick savory pancake", veg: true, spicy: 1, category: ["tiffen", "lunch"] },
                    { id: 11, name: "Filter Coffee", price: 69, description: "Traditional South Indian coffee", veg: true, spicy: 0, category: ["tiffen", "lunch", "dinner"] }
                ]
            },
            {
                id: 3,
                name: "Curry House",
                cuisine: "North Indian",
                description: "Traditional Indian curries and breads",
                deliveryTime: "35-45 min",
                rating: 4.4,
                reviewCount: 287,
                minOrder: 349,
                image: "https://images.unsplash.com/photo-1585937421612-70a008356fbe?w=400&h=250&fit=crop&auto=format",
                category: ["lunch", "dinner"],
                menu: [
                    { id: 12, name: "Butter Chicken", price: 449, description: "Creamy tomato curry", veg: false, spicy: 1, category: ["lunch", "dinner"] },
                    { id: 13, name: "Paneer Butter Masala", price: 399, description: "Cottage cheese in rich gravy", veg: true, spicy: 1, category: ["lunch", "dinner"] },
                    { id: 14, name: "Dal Makhani", price: 299, description: "Creamy black lentils", veg: true, spicy: 1, category: ["lunch", "dinner"] },
                    { id: 15, name: "Chicken Biryani", price: 349, description: "Fragrant rice with chicken", veg: false, spicy: 2, category: ["lunch", "dinner"] },
                    { id: 16, name: "Vegetable Biryani", price: 299, description: "Spiced rice with vegetables", veg: true, spicy: 1, category: ["lunch", "dinner"] },
                    { id: 17, name: "Garlic Naan", price: 79, description: "Freshly baked bread", veg: true, spicy: 0, category: ["lunch", "dinner"] },
                    { id: 18, name: "Raita", price: 69, description: "Cooling yogurt side", veg: true, spicy: 0, category: ["lunch", "dinner"] }
                ]
            },
            {
                id: 4,
                name: "Street Food Corner",
                cuisine: "Indian Street Food",
                description: "Authentic street food favorites",
                deliveryTime: "20-30 min",
                rating: 4.8,
                reviewCount: 315,
                minOrder: 149,
                image: "https://images.unsplash.com/photo-1565557623262-b51c2513a641?w=400&h=250&fit=crop",
                category: ["tiffen", "lunch", "dinner"],
                menu: [
                    { id: 19, name: "Pani Puri", price: 79, description: "Crispy puris with tangy water", veg: true, spicy: 2, category: ["tiffen", "lunch", "dinner"] },
                    { id: 20, name: "Pav Bhaji", price: 149, description: "Spiced vegetable mash with bread", veg: true, spicy: 2, category: ["lunch", "dinner"] },
                    { id: 21, name: "Chole Bhature", price: 169, description: "Spicy chickpeas with fried bread", veg: true, spicy: 2, category: ["tiffen", "lunch"] },
                    { id: 22, name: "Samosa", price: 59, description: "Spiced potato pastry", veg: true, spicy: 1, category: ["tiffen", "lunch", "dinner"] },
                    { id: 23, name: "Vada Pav", price: 49, description: "Mumbai's favorite burger", veg: true, spicy: 2, category: ["tiffen", "lunch"] },
                    { id: 24, name: "Bhel Puri", price: 89, description: "Puffed rice with chutneys", veg: true, spicy: 1, category: ["tiffen", "lunch"] }
                ]
            },
            {
                id: 5,
                name: "Healthy Bites",
                cuisine: "Healthy & Diet",
                description: "Nutritious and healthy meal options",
                deliveryTime: "25-35 min",
                rating: 4.3,
                reviewCount: 134,
                minOrder: 249,
                image: "https://images.unsplash.com/photo-1490645935967-10de6ba17061?w=400&h=250&fit=crop",
                category: ["tiffen", "lunch", "dinner"],
                menu: [
                    { id: 25, name: "Quinoa Salad", price: 299, description: "Protein-packed quinoa with veggies", veg: true, spicy: 0, category: ["lunch", "dinner"] },
                    { id: 26, name: "Avocado Toast", price: 199, description: "Whole grain bread with avocado", veg: true, spicy: 0, category: ["tiffen"] },
                    { id: 27, name: "Grilled Chicken Salad", price: 349, description: "Lean protein with fresh greens", veg: false, spicy: 0, category: ["lunch", "dinner"] },
                    { id: 28, name: "Smoothie Bowl", price: 229, description: "Mixed fruits with granola", veg: true, spicy: 0, category: ["tiffen"] },
                    { id: 29, name: "Brown Rice Meal", price: 279, description: "Brown rice with vegetables", veg: true, spicy: 1, category: ["lunch", "dinner"] }
                ]
            }
        ];

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            loadRestaurants();
            updateCartCount();
            loadCartFromStorage();
            checkLoginStatus();
        });

        function loadRestaurants() {
            restaurants = sampleRestaurants;
            displayRestaurants(restaurants);
        }

        function displayRestaurants(restaurantsToShow) {
            const grid = document.getElementById('restaurantGrid');
            
            grid.innerHTML = restaurantsToShow.map(restaurant => `
                <div class="col-md-6 col-lg-4 mb-4">
                    <div class="card restaurant-card h-100">
                        <div class="restaurant-image" style="background-image: url('${restaurant.image}')" 
                             onerror="this.style.backgroundImage='none'; this.classList.add('fallback-image'); this.innerHTML='<span>${restaurant.name}</span>'">
                            <span>${restaurant.name}</span>
                        </div>
                        <div class="card-body d-flex flex-column">
                            <h5 class="card-title">${restaurant.name}</h5>
                            <p class="card-text text-muted small flex-grow-1">${restaurant.cuisine} ‚Ä¢ ${restaurant.description}</p>
                            <div class="restaurant-info">
                                <div class="d-flex justify-content-between align-items-center mb-2">
                                    <span class="badge bg-warning text-dark">
                                        ‚≠ê ${restaurant.rating} (${restaurant.reviewCount})
                                    </span>
                                    <span class="text-muted small">${restaurant.deliveryTime}</span>
                                </div>
                                <div class="d-flex justify-content-between align-items-center">
                                    <small class="text-muted">Min. order: ‚Çπ${restaurant.minOrder}</small>
                                </div>
                            </div>
                            <button class="btn btn-primary w-100 mt-3" onclick="showRestaurantMenu(${restaurant.id})">
                                View Menu & Order
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function filterByCategory(category) {
            currentCategory = category;
            
            // Update active category buttons
            document.querySelectorAll('.meal-category').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            if (category === 'all') {
                displayRestaurants(restaurants);
            } else {
                const filteredRestaurants = restaurants.filter(restaurant => 
                    restaurant.category.includes(category)
                );
                displayRestaurants(filteredRestaurants);
            }
        }

        function showRestaurantMenu(restaurantId) {
            const restaurant = restaurants.find(r => r.id === restaurantId);
            if (!restaurant) return;

            // Filter menu items by current category if not "all"
            let menuItems = restaurant.menu;
            if (currentCategory !== 'all') {
                menuItems = restaurant.menu.filter(item => 
                    item.category.includes(currentCategory)
                );
            }

            const menuHtml = menuItems.map(item => {
                const vegClass = item.veg ? 'veg' : 'non-veg';
                const spicyIcons = 'üå∂Ô∏è'.repeat(item.spicy);
                const indianSpecialClass = restaurant.cuisine.includes('Indian') ? 'indian-special' : '';
                
                return `
                <div class="card menu-item-card ${indianSpecialClass}">
                    <div class="card-body">
                        <div class="row align-items-center">
                            <div class="col-1">
                                <span class="veg-indicator ${vegClass}"></span>
                            </div>
                            <div class="col-7">
                                <h6 class="mb-1 fw-bold">${item.name}</h6>
                                <p class="text-muted small mb-1">${item.description}</p>
                                <div class="d-flex align-items-center">
                                    <strong class="text-primary me-2">‚Çπ${item.price}</strong>
                                    ${item.spicy > 0 ? `<span class="spicy-level">${spicyIcons}</span>` : ''}
                                </div>
                            </div>
                            <div class="col-4 text-end">
                                <button class="btn btn-success btn-sm" onclick="addToCart(${item.id}, ${restaurantId})">
                                    + Add to Cart
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                `;
            }).join('');

            const modalHtml = `
                <div class="modal fade" id="menuModal" tabindex="-1">
                    <div class="modal-dialog modal-lg">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title">${restaurant.name} - Menu</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                            </div>
                            <div class="modal-body">
                                <div class="mb-3">
                                    <small class="text-muted">${restaurant.description} ‚Ä¢ ${restaurant.deliveryTime} ‚Ä¢ Min. order: ‚Çπ${restaurant.minOrder}</small>
                                </div>
                                <div class="mb-2">
                                    <small><span class="veg-indicator veg"></span> Vegetarian ‚Ä¢ <span class="veg-indicator non-veg"></span> Non-Vegetarian</small>
                                </div>
                                ${menuItems.length > 0 ? menuHtml : '<p class="text-center">No items available in this category</p>'}
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close Menu</button>
                            </div>
                        </div>
                    </div>
                </div>
            `;

            // Remove existing modal if any
            const existingModal = document.getElementById('menuModal');
            if (existingModal) {
                existingModal.remove();
            }

            // Add new modal to body
            document.body.insertAdjacentHTML('beforeend', modalHtml);
            
            // Show the modal
            const menuModal = new bootstrap.Modal(document.getElementById('menuModal'));
            menuModal.show();
        }

        // Login and User Management Functions
        function showLogin() {
            const loginModal = new bootstrap.Modal(document.getElementById('loginModal'));
            loginModal.show();
        }

        function showSignup() {
            const loginModal = bootstrap.Modal.getInstance(document.getElementById('loginModal'));
            loginModal.hide();
            
            const signupModal = new bootstrap.Modal(document.getElementById('signupModal'));
            signupModal.show();
        }

        function checkLoginStatus() {
            const savedUser = localStorage.getItem('inipunUser');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                updateUserInterface();
            }
        }

        function updateUserInterface() {
            if (currentUser) {
                document.getElementById('loginLink').classList.add('d-none');
                document.getElementById('userProfile').classList.remove('d-none');
                document.getElementById('userInitial').textContent = currentUser.name.charAt(0).toUpperCase();
            } else {
                document.getElementById('loginLink').classList.remove('d-none');
                document.getElementById('userProfile').classList.add('d-none');
            }
        }

        // Login form handler
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            // Simple login simulation
            currentUser = {
                name: email.split('@')[0],
                email: email
            };
            
            localStorage.setItem('inipunUser', JSON.stringify(currentUser));
            updateUserInterface();
            
            const loginModal = bootstrap.Modal.getInstance(document.getElementById('loginModal'));
            loginModal.hide();
            
            showNotification('Login successful! Welcome back!', 'success');
        });

        // Signup form handler
        document.getElementById('signupForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const name = document.getElementById('signupName').value;
            const email = document.getElementById('signupEmail').value;
            const phone = document.getElementById('signupPhone').value;
            const password = document.getElementById('signupPassword').value;
            
            currentUser = {
                name: name,
                email: email,
                phone: phone
            };
            
            localStorage.setItem('inipunUser', JSON.stringify(currentUser));
            updateUserInterface();
            
            const signupModal = bootstrap.Modal.getInstance(document.getElementById('signupModal'));
            signupModal.hide();
            
            showNotification('Account created successfully! Welcome to INIPUN!', 'success');
        });

        // Payment Functions
        function showPaymentOptions() {
            if (!currentUser) {
                showNotification('Please login to proceed with payment', 'warning');
                showLogin();
                return;
            }
            
            if (inipunCart.length === 0) {
                showNotification('Your cart is empty!', 'warning');
                return;
            }
            
            const cartModal = bootstrap.Modal.getInstance(document.getElementById('cartModal'));
            cartModal.hide();
            
            const paymentModal = new bootstrap.Modal(document.getElementById('paymentModal'));
            paymentModal.show();
        }

        function selectPayment(method) {
            selectedPaymentMethod = method;
            document.querySelectorAll('.payment-method').forEach(pm => {
                pm.classList.remove('selected');
            });
            event.currentTarget.classList.add('selected');
            document.getElementById(method + 'Payment').checked = true;
        }

        function processPayment() {
            if (!selectedPaymentMethod) {
                showNotification('Please select a payment method', 'warning');
                return;
            }
            
            const total = inipunCart.reduce((sum, item) => sum + item.price, 0);
            
            // Simulate payment processing
            showNotification(`Payment of ‚Çπ${total} processed successfully via ${selectedPaymentMethod.toUpperCase()}!`, 'success');
            
            // Clear cart
            inipunCart = [];
            updateCartCount();
            saveCartToStorage();
            
            // Close payment modal
            const paymentModal = bootstrap.Modal.getInstance(document.getElementById('paymentModal'));
            paymentModal.hide();
            
            selectedPaymentMethod = null;
        }

        // Existing cart and utility functions
        function addToCart(itemId, restaurantId) {
            const restaurant = restaurants.find(r => r.id === restaurantId);
            const menuItem = restaurant.menu.find(item => item.id === itemId);
            
            const cartItem = {
                id: Date.now(),
                name: menuItem.name,
                price: menuItem.price,
                restaurant: restaurant.name,
                veg: menuItem.veg,
                quantity: 1
            };

            inipunCart.push(cartItem);
            updateCartCount();
            saveCartToStorage();
            showNotification(`"${menuItem.name}" added to cart! üõí`);
        }

        function updateCartCount() {
            const cartCountElement = document.getElementById('cartCount');
            if (cartCountElement) {
                cartCountElement.textContent = inipunCart.length;
            }
        }

        function showCart() {
            const cartItems = document.getElementById('cartItems');
            const emptyCartMessage = document.getElementById('emptyCartMessage');
            const cartTotal = document.getElementById('cartTotal');

            if (inipunCart.length === 0) {
                cartItems.innerHTML = '';
                emptyCartMessage.style.display = 'block';
                cartTotal.textContent = '0.00';
            } else {
                emptyCartMessage.style.display = 'none';
                cartItems.innerHTML = inipunCart.map(item => {
                    const vegClass = item.veg ? 'veg' : 'non-veg';
                    return `
                    <div class="cart-item d-flex justify-content-between align-items-center border-bottom pb-3 mb-3">
                        <div class="d-flex align-items-center">
                            <span class="veg-indicator ${vegClass} me-2"></span>
                            <div>
                                <h6 class="mb-1">${item.name}</h6>
                                <small class="text-muted">${item.restaurant}</small>
                            </div>
                        </div>
                        <div class="text-end">
                            <div class="d-flex align-items-center">
                                <span class="me-3 fw-bold text-primary">‚Çπ${item.price}</span>
                                <button class="btn btn-sm btn-outline-danger" onclick="removeFromCart(${item.id})">
                                    Remove
                                </button>
                            </div>
                        </div>
                    </div>
                    `;
                }).join('');

                const total = inipunCart.reduce((sum, item) => sum + item.price, 0);
                cartTotal.textContent = total.toFixed(2);
            }

            const cartModal = new bootstrap.Modal(document.getElementById('cartModal'));
            cartModal.show();
        }

        function removeFromCart(itemId) {
            inipunCart = inipunCart.filter(item => item.id !== itemId);
            updateCartCount();
            saveCartToStorage();
            showCart();
            showNotification('Item removed from cart', 'warning');
        }

        function searchRestaurants() {
            const searchInput = document.getElementById('searchInput');
            const searchTerm = searchInput.value.toLowerCase().trim();
            
            if (searchTerm === '') {
                displayRestaurants(restaurants);
                return;
            }

            const filteredRestaurants = restaurants.filter(restaurant => 
                restaurant.name.toLowerCase().includes(searchTerm) ||
                restaurant.cuisine.toLowerCase().includes(searchTerm) ||
                restaurant.description.toLowerCase().includes(searchTerm)
            );

            displayRestaurants(filteredRestaurants);
            
            if (filteredRestaurants.length === 0) {
                showNotification('No restaurants found matching your search.', 'info');
            }
        }

        function showNotification(message, type = 'success') {
            const existingNotifications = document.querySelectorAll('.notification');
            existingNotifications.forEach(notif => notif.remove());

            const notification = document.createElement('div');
            notification.className = `notification`;
            notification.textContent = message;
            notification.style.background = type === 'success' ? '#10b981' : 
                                          type === 'error' ? '#ef4444' : 
                                          type === 'warning' ? '#f59e0b' : '#3b82f6';

            document.body.appendChild(notification);

            setTimeout(() => {
                if (notification.parentNode) {
                    notification.parentNode.removeChild(notification);
                }
            }, 3000);
        }

        function saveCartToStorage() {
            localStorage.setItem('inipunCart', JSON.stringify(inipunCart));
        }

        function loadCartFromStorage() {
            const savedCart = localStorage.getItem('inipunCart');
            if (savedCart) {
                inipunCart = JSON.parse(savedCart);
                updateCartCount();
            }
        }

        // Make functions globally available
        window.searchRestaurants = searchRestaurants;
        window.showRestaurantMenu = showRestaurantMenu;
        window.addToCart = addToCart;
        window.showCart = showCart;
        window.removeFromCart = removeFromCart;
        window.showLogin = showLogin;
        window.showSignup = showSignup;
        window.filterByCategory = filterByCategory;
        window.selectPayment = selectPayment;
        window.processPayment = processPayment;
        window.showPaymentOptions = showPaymentOptions;
    </script>
</body>
</html>